import{d as k,e as O,f as P,c,b as t,g as S,v as L,u as l,h as N,t as r,n as x,F as d,i as f,j as R,o as u,k as j}from"./index.19792834.js";import{a as _}from"./index.becf6c0c.js";const D={class:"row justify-content-between"},F={class:"col-5 row justify-content-start"},$={class:"col-4"},A={class:"col"},B={class:"col-7 row justify-content-end"},W={class:"input-group"},E=t("input",{type:"text",class:"form-control",placeholder:"\uAC80\uC0C9\uC5B4"},null,-1),I=t("strong",null,"Loading...",-1),M=t("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"false"},null,-1),T=[I,M],z={class:"table table-hover"},V=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"\uCD95\uC81C\uBA85"),t("th",{scope:"col"},"\uC2DC\uC791\uC77C"),t("th",{scope:"col"},"\uC885\uB8CC\uC77C"),t("th",{scope:"col"},"\uC5F0\uB77D\uCC98"),t("th",{scope:"col"},"\uC9C0\uC5ED")])],-1),K={class:"table-group-divider"},J=["onClick"],U={scope:"row"},Y={"aria-label":"Page navigation example"},G={class:"pagination justify-content-center"},Q=t("li",{class:"page-item disabled"},[t("a",{class:"page-link"},"Previous")],-1),Z={key:0,class:"page-item"},q=["onClick"],H=t("li",{class:"page-item"},[t("a",{class:"page-link",href:"#"},"Next")],-1),ot={__name:"FestivalList",setup(X){let e=k({totalCount:0,totalPageNo:0,numOfRow:10,itemList:[],currentPageList:[],currentPageNo:0,spiner_status:"invisible",fromday:""});const h=R("stores");function g(o){return Object.keys(o).length===0&&o.constructor===Object}g(h.festivalStates)||(e={...h.festivalStates});function v(o=20){const n=new Date;return n.setDate(n.getDate()+o),n.toISOString().split("T")[0]}const y="BoygPZjC27pxm92hSposjnSob2u36vziS1rzIzxkrL9QxmlhB0SMARwLfNlBE3wrE7nnw34zLmmv0a6amvW4xg==";function b(o=1,n=1){let s={serviceKey:y,numOfRows:n,pageNo:o,MobileOS:"ETC",MobileApp:"AppTest",_type:"json",listYN:"Y",arrange:"C",eventStartDate:e.fromday};e.spiner_status="visible",_.get("https://apis.data.go.kr/B551011/KorService/searchFestival",{params:s}).then(function(a){const i=a.data.response;console.log(`axios : ${i.header.resultCode=="0000"}`),i.header.resultCode=="0000"?(e.totalCount=i.body.totalCount,C(s)):alert(`${JSON.stringify(i.header)}`)}).catch(function(a){console.log(a),e.spiner_status="invisible"})}function C(o){e.spiner_status="visible",o.numOfRows=e.totalCount,_.get("https://apis.data.go.kr/B551011/KorService/searchFestival",{params:o}).then(function(n){const s=n.data.response;console.log(`axios : ${s.header.resultCode=="0000"}`),s.header.resultCode=="0000"?(e.totalCount=w(s.body.items.item),e.totalPageNo=Math.ceil(e.totalCount/e.numOfRow),p()):alert(`${JSON.stringify(s.header)}`),e.spiner_status="invisible"}).catch(function(n){console.log(n),e.spiner_status="invisible"})}function w(o){return e.itemList=o.filter((s,a)=>s.title.includes("\uCD95\uC81C")),e.itemList.length}function tt(o){return o}function p(o=0){e.currentPageNo=o;const n=o*e.numOfRow,s=n+e.numOfRow;console.log(`getCurrentPageWithItemList() index_start: ${n}, index_end : ${s}`);let a=[];e.itemList.forEach((i,m)=>{m>=n&&m<s&&(console.log(`currentRows.push item: ${i.title}`),a.push(i))}),e.currentPageList=a}return O(()=>{e.fromday=v(),e.numOfRows=10}),P(()=>{h.festivalStates={...e}}),(o,n)=>(u(),c(d,null,[t("div",D,[t("div",F,[t("div",$,[S(t("input",{type:"date",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=s=>l(e).fromday=s)},null,512),[[L,l(e).fromday]])]),t("div",A,[t("button",{type:"submit",class:"btn btn-primary",onClick:b}," Get Data from API "),N(" Totel : "+r(l(e).totalCount),1)])]),t("div",B,[t("div",W,[E,t("button",{type:"submit",class:"btn btn-outline-primary",onClick:n[1]||(n[1]=(...s)=>o.search&&o.search(...s))}," \uAC80\uC0C9\uC5B4 ")])])]),t("div",{class:x(["d-flex align-items-center",l(e).spiner_status])},T,2),t("table",z,[V,t("tbody",K,[(u(!0),c(d,null,f(l(e).currentPageList,(s,a)=>(u(),c("tr",{key:a,onClick:i=>o.$router.push({name:"FestivalView",params:{contentid:s.contentid,contenttypeid:s.contenttypeid}})},[t("th",U,r(a+1+l(e).currentPageNo*l(e).numOfRow),1),t("td",null,r(s.title),1),t("td",null,r(s.eventstartdate),1),t("td",null,r(s.eventenddate),1),t("td",null,r(s.tel),1),t("td",null,r(s.addr1),1)],8,J))),128))])]),t("nav",Y,[t("ul",G,[Q,(u(!0),c(d,null,f(l(e).totalPageNo,(s,a)=>(u(),c(d,{key:a},[s<=4?(u(),c("li",Z,[t("a",{class:"page-link",onClick:i=>p(a)},r(s),9,q)])):j("",!0)],64))),128)),H])])],64))}};export{ot as default};
